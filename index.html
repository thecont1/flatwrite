<!DOCTYPE html>
<html lang="en" data-framework="poshui">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FlatWrite ‚Äî Minimalist Markdown Editor</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Unbounded:wght@300;400;600;700&family=Lato:wght@300;400;700&family=Inter:wght@300;400;600;700&family=Merriweather:wght@300;400;700&family=Source+Code+Pro:wght@300;400;600;700&family=Playfair+Display:wght@400;600;700&family=Space+Grotesk:wght@300;400;600;700&family=Crimson+Text:wght@400;600;700&family=Outfit:wght@300;400;600;700&family=Bitter:wght@300;400;600;700&family=DM+Serif+Display&family=JetBrains+Mono:wght@300;400;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- Base app styles (always loaded) -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Framework CSS is NOT loaded globally ‚Äî it only applies inside the
       preview iframe and HTML exports, keeping the app shell independent. -->

  <!-- marked.js for Markdown ‚Üí HTML -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- html2pdf.js for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.2/html2pdf.bundle.min.js"></script>

  <!-- App logic -->
  <script src="app.js" defer></script>
</head>
<body>
  <div class="app-shell">

    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-inner">
        <!-- App title -->
        <h1 class="app-title">FlatWrite</h1>
        <p class="tagline">Write once, style many worlds.</p>

        <hr class="sidebar-divider" />

        <!-- Framework selector -->
        <div class="framework-selector">
          <label for="framework-dropdown" class="sidebar-section-label">Framework</label>
          <select id="framework-dropdown" class="framework-dropdown">
            <option value="poshui">PoshUI</option>
            <option value="oat">Oat</option>
            <option value="spectre">Spectre.css</option>
          </select>
          <span class="framework-current" id="framework-current">Active: PoshUI</span>
        </div>

        <hr class="sidebar-divider" />

        <!-- UI Component snippets (dynamically enabled/disabled per framework) -->
        <div class="components-panel">
          <p class="sidebar-section-label">UI Components</p>
          <p class="components-hint">Click to insert ¬∑ greyed = unsupported</p>
          <div class="components-grid" id="components-grid">
            <!-- Populated dynamically by app.js based on selected framework -->
          </div>
        </div>
      </div>
    </aside>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="main-panel">
      <div class="main-inner">

        <!-- Toolbar: mode toggle + typography + export buttons -->
        <div class="toolbar">
          <div class="toolbar-left">
            <button class="btn btn-mode active" id="btn-edit" type="button">Edit</button>
            <button class="btn btn-mode" id="btn-preview" type="button">Preview</button>
          </div>
          <div class="toolbar-center">
            <div class="typo-controls">
              <!-- Font family picker (comfort only) -->
              <select id="font-picker" class="typo-font-picker" title="Preview font">
                <option value="Unbounded">Unbounded</option>
                <option value="Lato">Lato</option>
                <option value="Inter">Inter</option>
                <option value="Merriweather">Merriweather</option>
                <option value="Playfair Display">Playfair Display</option>
                <option value="Space Grotesk">Space Grotesk</option>
                <option value="Crimson Text">Crimson Text</option>
                <option value="Outfit">Outfit</option>
                <option value="Bitter">Bitter</option>
                <option value="DM Serif Display">DM Serif Display</option>
                <option value="JetBrains Mono">JetBrains Mono</option>
                <option value="Source Code Pro">Source Code Pro</option>
              </select>
              <span class="typo-sep"></span>
              <!-- Size +/‚àí -->
              <span class="typo-label">Size</span>
              <button class="typo-btn" id="size-down" type="button" title="Decrease size">‚àí</button>
              <button class="typo-btn" id="size-up" type="button" title="Increase size">+</button>
              <span class="typo-sep"></span>
              <!-- Weight +/‚àí -->
              <span class="typo-label">Weight</span>
              <button class="typo-btn" id="weight-down" type="button" title="Lighter">‚àí</button>
              <button class="typo-btn" id="weight-up" type="button" title="Bolder">+</button>
              <span class="typo-sep"></span>
              <!-- Line spacing +/‚àí -->
              <span class="typo-label">Spacing</span>
              <button class="typo-btn" id="line-down" type="button" title="Tighter lines">‚àí</button>
              <button class="typo-btn" id="line-up" type="button" title="Looser lines">+</button>
            </div>
          </div>
          <div class="toolbar-right">
            <span class="export-label">Download</span>
            <button class="export-icon-btn" id="btn-export-md" type="button" title="Open as .md">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14 4.5V14a2 2 0 0 1-2 2H9v-1h3a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM.706 13.189v2.66H0V11.85h.806l1.14 2.596h.026l1.14-2.596h.8v3.999h-.716v-2.66h-.038l-.946 2.159h-.516l-.952-2.16H.706Zm3.919 2.66V11.85h1.459q.609 0 1.005.234t.589.68q.195.445.196 1.075 0 .634-.196 1.084-.197.451-.595.689-.396.237-1 .237H4.626Zm1.353-3.354h-.562v2.707h.562q.279 0 .484-.082a.8.8 0 0 0 .334-.252 1.1 1.1 0 0 0 .196-.422q.067-.252.067-.592a2.1 2.1 0 0 0-.117-.753.9.9 0 0 0-.354-.454q-.238-.152-.61-.152"/></svg>
            </button>
            <button class="export-icon-btn" id="btn-export-html" type="button" title="Open as .html">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14 4.5V11h-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zm-9.736 7.35v3.999h-.791v-1.714H1.79v1.714H1V11.85h.791v1.626h1.682V11.85h.79Zm2.251.662v3.337h-.794v-3.337H4.588v-.662h3.064v.662zm2.176 3.337v-2.66h.038l.952 2.159h.516l.946-2.16h.038v2.661h.715V11.85h-.8l-1.14 2.596H9.93L8.79 11.85h-.805v3.999zm4.71-.674h1.696v.674H12.61V11.85h.79v3.325Z"/></svg>
            </button>
            <button class="export-icon-btn" id="btn-export-pdf" type="button" title="Open as .pdf">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM1.6 11.85H0v3.999h.791v-1.342h.803q.43 0 .732-.173.305-.175.463-.474a1.4 1.4 0 0 0 .161-.677q0-.375-.158-.677a1.2 1.2 0 0 0-.46-.477q-.3-.18-.732-.179m.545 1.333a.8.8 0 0 1-.085.38.57.57 0 0 1-.238.241.8.8 0 0 1-.375.082H.788V12.48h.66q.327 0 .512.181.185.183.185.522m1.217-1.333v3.999h1.46q.602 0 .998-.237a1.45 1.45 0 0 0 .595-.689q.196-.45.196-1.084 0-.63-.196-1.075a1.43 1.43 0 0 0-.589-.68q-.396-.234-1.005-.234zm.791.645h.563q.371 0 .609.152a.9.9 0 0 1 .354.454q.118.302.118.753a2.3 2.3 0 0 1-.068.592 1.1 1.1 0 0 1-.196.422.8.8 0 0 1-.334.252 1.3 1.3 0 0 1-.483.082h-.563zm3.743 1.763v1.591h-.79V11.85h2.548v.653H7.896v1.117h1.606v.638z"/></svg>
            </button>
          </div>
        </div>

        <!-- Editor textarea -->
        <div class="editor-wrap" id="editor-wrap">
          <label for="editor" class="editor-label">Content (Markdown)</label>

          <!-- Markdown formatting toolbar -->
          <div class="md-toolbar" id="md-toolbar">
            <button class="md-btn" data-md="h1" type="button" title="Heading 1">H1</button>
            <button class="md-btn" data-md="h2" type="button" title="Heading 2">H2</button>
            <button class="md-btn" data-md="h3" type="button" title="Heading 3">H3</button>
            <button class="md-btn" data-md="h4" type="button" title="Heading 4">H4</button>
            <span class="md-toolbar-sep"></span>
            <button class="md-btn" data-md="bold" type="button" title="Bold">B</button>
            <button class="md-btn md-btn-italic" data-md="italic" type="button" title="Italic">I</button>
            <button class="md-btn" data-md="strikethrough" type="button" title="Strikethrough">SÃ∂</button>
            <span class="md-toolbar-sep"></span>
            <button class="md-btn" data-md="blockquote" type="button" title="Blockquote">‚ùù</button>
            <button class="md-btn" data-md="inlinecode" type="button" title="Inline Code">&lt;/&gt;</button>
            <button class="md-btn" data-md="codeblock" type="button" title="Code Block">```</button>
            <span class="md-toolbar-sep"></span>
            <button class="md-btn" data-md="ul" type="button" title="Bullet List">‚Ä¢&nbsp;List</button>
            <button class="md-btn" data-md="ol" type="button" title="Numbered List">1.&nbsp;List</button>
            <button class="md-btn" data-md="task" type="button" title="Task List">‚òë Task</button>
            <span class="md-toolbar-sep"></span>
            <button class="md-btn" data-md="link" type="button" title="Link">üîó</button>
            <button class="md-btn" data-md="image" type="button" title="Image">üñºÔ∏è</button>
            <button class="md-btn" data-md="hr" type="button" title="Horizontal Rule">‚Äî</button>
          </div>

          <textarea
            id="editor"
            class="editor"
            spellcheck="true"
            placeholder="Start writing your markdown here‚Ä¶"
          ></textarea>
        </div>

        <!-- Preview pane (hidden by default) ‚Äî uses iframe to sandbox framework CSS -->
        <div class="preview-wrap hidden" id="preview-wrap">
          <iframe id="preview-frame" class="preview-frame" title="Preview"></iframe>
        </div>

      </div>
    </main>

  </div>

  <!-- ===== FOOTER ===== -->
  <footer class="app-footer">
    <p class="footer-copy">&copy; 2026 All rights reserved &middot; Crafted with ‚ù§Ô∏è by <b>Mahesh Shantaram</b>
      &laquo;<a href="https://thecontrarian.in" target="_blank" rel="noopener">thecontrarian.in</a>&raquo;
    </p>
  </footer>

  <!-- ===== COMPONENT MODAL ===== -->
  <div class="comp-modal-overlay hidden" id="comp-modal-overlay">
    <div class="comp-modal" id="comp-modal">
      <div class="comp-modal-header">
        <h3 class="comp-modal-title" id="comp-modal-title">Insert Component</h3>
        <button class="comp-modal-close" id="comp-modal-close" type="button" title="Close">&times;</button>
      </div>
      <div class="comp-modal-body" id="comp-modal-body">
        <!-- Dynamically populated form fields -->
      </div>
      <div class="comp-modal-footer">
        <button class="btn btn-mode" id="comp-modal-cancel" type="button">Cancel</button>
        <button class="btn btn-export" id="comp-modal-insert" type="button">Insert</button>
      </div>
    </div>
  </div>
</body>
</html>
